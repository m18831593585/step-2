<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<script>
    var d = Symbol();
    var e = Symbol();
    var ss = {a: 1};
    var date = new Date();
    var divs = document.createElement("div");
    divs.setAttribute("a", "3");
    date.setFullYear(2022);


    var obj = {
        a: 1,
        b: 2,
        c: [1, 2, 3],
        zz: new Set([1, 2, ss]),
        yy: new Map(),
        [d]: "aaa",
        z: divs,
        d: {
            e: date,
            f: /a/g,
            g: function (s) {
                console.log(s);
            },
            h: {},
        },
    };
    obj.d.g.ssss = 10;
    obj.eee = new Uint8Array([97, 98, 99]);
    Object.defineProperties(obj.d.h, {
        i: {
            value: 10,
        },
        j: {
            configurable: true,
            writable: true,
            value: [1, 2, 3, 4],
        },
        k: {
            writable: true,
            value: {
                l: {},
                m: "abcde",
                n: true,
                o: [1, 2, 3],
            },
        },
        [e]: {
            value: ["a", "b", "c", "e"],
        },
    });
    obj.z.style.width = "50px";
    obj.z.style.height = "50px";
    obj.z.style.backgroundColor = "red";

    Object.defineProperties(obj.d.h.k.l, {
        p: {
            value: function () {
                console.log("p");
            },
        },
        q: {
            value: {
                r: {a: 1},
                j: {b: 2},
            },
        },
    });
    var a_1 = {a: 1};
    var a_2 = {b: 2};
    obj.yy.set("name", "xietian");
    obj.yy.set(a_1, a_2);

    Object.defineProperty(obj, "www", {
        set: function (_v) {
            this.a = _v;
        },
        get: function () {
            return this.a;
        },
    });

    function cloneObject(obj) {
        let _obj
        if (Node.prototype.isPrototypeOf(obj)) {
            let _obj = document.createElement(obj.nodeName)
            _obj.style = obj.cssText
        } else if (['Date', 'RegExp', 'Set', 'Map'].includes(typeof obj)) {
            _obj = new obj.constructor(obj)
        } else if (obj.constructor === Uint8Array) {
            _obj = new obj.constructor(Array.from(obj))
        } else if (obj.constructor === Function) {
            let arg = obj.toString().match(/\((.*?)\)/)[1]
            let body = obj.toString().replace(/[\n\r]/g, "").match(/{.*}/)[1]
            _obj = new Function(arg, body)
        } else {
            _obj = new obj.constructor()
        }

        let props = Reflect.ownKeys(obj)

        for (let i = 0; i < props.length; i++) {
            if (props[i] === 'prototype') continue
            let desc = Object.getOwnPropertyDescriptor(obj, props[i])
            if (typeof desc.value === 'object' && desc.value !== null || typeof desc.value === 'function') {
                let _o = cloneObject(desc.value)
                Object.defineProperty(_obj, props[i], {
                    value: _o,
                    enumerable: desc.enumerable,
                    writable: desc.writable,
                    configurable: desc.configurable
                })
            } else {
                Object.defineProperty(_obj, props[i], desc)
            }
        }
        return _obj
    }


    let o1 = cloneObject(obj);
    console.log(obj, o1)


</script>

</body>
</html>